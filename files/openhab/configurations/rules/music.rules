rule switch_gf_radio // triggers on the wall switch
when
    Item Switch_GF_Radio received command
then
    if (receivedCommand == ON) {
        if (AV_Pwr.state == OFF) {
            sendCommand(AV_Pwr, ON)      // switch on VSX-528
        }
        sendCommand(AV_Source, 45)   // select source Favorites
        Thread::sleep(2000)
        sendCommand(AV_Playback, 30) // send command "enter"
    } else if (receivedCommand == OFF && AV_Pwr.state == ON) {
        sendCommand(AV_Pwr, OFF)
    }
end

rule AV_Pwr_ON // triggers when VSX-528 switches on/off
when
    Item AV_Pwr received command
then
    if (receivedCommand == ON && Switch_GF_Radio.state == OFF) {
        sendCommand(Switch_GF_Radio, ON)
    } else if (receivedCommand == OFF && Switch_GF_Radio.state == ON) {
        sendCommand(Switch_GF_Radio, OFF)
    }
end
